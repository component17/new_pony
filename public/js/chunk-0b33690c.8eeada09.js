(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b33690c"],{"0621":function(e,t,l){"use strict";var n=l("276a"),o=l.n(n);o.a},"276a":function(e,t,l){},"5e08":function(e,t,l){"use strict";l.r(t);var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",[l("vs-divider",[e._v("\n                Список маяков\n            ")]),null!==e.currentSection?l("vs-row",[e._l(e.currentSection.modules,function(t){return l("vs-col",{attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-sm":"12","vs-lg":e.columnCount}},[l("vs-card",{attrs:{actionable:""},nativeOn:{contextmenu:function(l){return l.preventDefault(),e.$refs.menu.open(l,t)}}},[l("div",{staticClass:"card-content-section"},[l("h5",{staticClass:"mb-1"},[e._v(e._s(t.alias))]),e._v("\n                            ID: "+e._s(t.did)+"\n                        ")])])],1)}),l("vs-col",{attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-sm":"12","vs-lg":e.columnCount}},[l("vs-card",{attrs:{actionable:""},nativeOn:{click:function(t){return e.addModule(t)}}},[l("div",{staticClass:"card-content-section"},[l("h5",{staticStyle:{color:"#7367f0"}},[e._v("+ Добавить маяк")])])])],1)],2):e._e()],1),l("vs-prompt",{attrs:{"vs-title":"Новый модуль","vs-accept-text":"Добавить","vs-cancel-text":"Отменить","vs-active":e.dialogAddModule},on:{"vs-cancel":e.cancelAddModule,"vs-accept":e.saveModule,"vs-close":e.cancelAddModule,"update:vsActive":function(t){e.dialogAddModule=t},"update:vs-active":function(t){e.dialogAddModule=t}}},[l("div",{staticClass:"con-exemple-prompt"},[l("div",{staticClass:"mb-3"},[l("span",[e._v("Введите наименование")]),l("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"Ячейка 1","vs-placeholder":"Ячейка 1"},model:{value:e.newModuleAlias,callback:function(t){e.newModuleAlias=t},expression:"newModuleAlias"}})],1),l("div",[l("span",[e._v("Введите ID модуля")]),l("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"201905040001","vs-placeholder":"201905040001"},model:{value:e.newModuleId,callback:function(t){e.newModuleId=t},expression:"newModuleId"}})],1)])]),l("vs-prompt",{attrs:{"vs-title":"Редакитровать маяк","vs-accept-text":"Сохранить","vs-cancel-text":"Отменить","vs-active":e.dialogUpdateModule},on:{"vs-cancel":e.cancelAddModule,"vs-accept":e.saveUpdateModule,"vs-close":e.cancelAddModule,"update:vsActive":function(t){e.dialogUpdateModule=t},"update:vs-active":function(t){e.dialogUpdateModule=t}}},[l("div",{staticClass:"con-exemple-prompt"},[l("div",{staticClass:"mb-3"},[l("span",[e._v("Введите наименование")]),l("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"Ячейка 1","vs-placeholder":"Ячейка 1"},model:{value:e.newModuleAlias,callback:function(t){e.newModuleAlias=t},expression:"newModuleAlias"}})],1),l("div",[l("span",[e._v("Введите ID модуля")]),l("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"201905040001","vs-placeholder":"201905040001"},model:{value:e.newModuleId,callback:function(t){e.newModuleId=t},expression:"newModuleId"}})],1)])]),l("vue-context",{ref:"menu",scopedSlots:e._u([{key:"default",fn:function(t){return[l("ul",{staticClass:"bordered-items p-0"},[l("li",{on:{click:function(l){return e.optionClicked(l.target.innerText,t.data)}}},[e._v("Редактировать")]),l("li",{on:{click:function(l){return e.optionClicked(l.target.innerText,t.data)}}},[e._v("Удалить")])])]}}])})],1)},o=[],s=(l("96cf"),l("cb0c")),d=l("9175"),i={components:{VueContext:d["VueContext"]},data:function(){return{currentSection:null,columnCount:3,dialogAddModule:!1,newModuleAlias:"",newModuleId:"",newModuleTitle:"",dialogUpdateModule:!1,lastModuleId:null}},created:function(){var e=this;this.$vs.loading(),this.$store.dispatch("modules/getSectionById",this.$route.params.section).then(function(t){e.$emit("changeRouteTitle",t.title),e.currentSection=t,e.$vs.loading.close()}).catch(function(t){e.$vs.loading.close(),e.$router.push("/modules")})},methods:{optionClicked:function(e,t){"Редактировать"===e?this.editModule(t):(this.lastModuleId=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Подтвердите удаление",text:"Удалить?",acceptText:"Удалить",cancelText:"Отменить",accept:this.deleteModule}))},deleteModule:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.delete("/modules/"+this.lastModuleId.id);case 3:this.$store.commit("modules/moduleDelete",this.lastModuleId),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),addModule:function(){this.dialogAddModule=!0},cancelAddModule:function(){this.dialogAddModule=!1,this.newModuleAlias="",this.newModuleId="",this.dialogUpdateModule=!1},saveModule:function(){var e=this;this.$http.post("/modules",{name:this.newModuleAlias,pid:this.$route.params.section,did:this.newModuleId}).then(function(t){e.$vs.notify({title:"Успешно!",text:"Модуль добавлен.",color:"success"})}).catch(function(t){e.$vs.notify({title:"Ошибка!",text:t.response.data.err,color:"red"})}),this.cancelAddModule()},editModule:function(e){console.log(e),this.lastModuleId=e.id,this.newModuleAlias=e.alias,this.newModuleId=e.did,this.dialogUpdateModule=!0},saveUpdateModule:function(){var e=this;this.$http.post("/modules/"+this.lastModuleId,{alias:this.newModuleAlias,did:this.newModuleId}).then(function(t){e.$store.commit("modules/updateModule",t.data),e.$vs.notify({title:"Успешно!",text:"Маяк сохранен.",color:"success"})}).catch(function(t){console.log(t),e.$vs.notify({title:"Ошибка!",text:t.response.data.err,color:"red"})}).then(function(){e.cancelAddModule()})}}},a=i,c=(l("0621"),l("2877")),u=Object(c["a"])(a,n,o,!1,null,"6497573b",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-0b33690c.8eeada09.js.map