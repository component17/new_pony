(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ec8bf2d"],{"25c6":function(t,e,n){"use strict";var c=n("5829"),i=n.n(c);i.a},4228:function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mt-10"},[n("vs-row",[t._l(t.$store.state.modules.sections,function(e,c){return n("vs-col",{attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-sm":"12","vs-lg":"3"}},[n("vs-card",{attrs:{actionable:""},nativeOn:{contextmenu:function(n){return n.preventDefault(),t.$refs.menu.open(n,e)},click:function(n){return t.selectSection(e.id)}}},[n("div",{staticClass:"card-content-section"},[n("h5",{staticClass:"mb-1"},[t._v(t._s(e.title))]),t._v("\n                        Кол-во маяков: "+t._s(e.modules?e.modules.length:0)+" шт.\n                    ")])])],1)}),n("vs-col",{attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-sm":"12","vs-lg":"3"}},[n("vs-card",{attrs:{actionable:""},nativeOn:{click:function(e){return t.addSection(e)}}},[n("div",{staticClass:"card-content-section"},[n("h5",{staticStyle:{color:"#7367f0"}},[t._v("+ Добавить группу")])])])],1)],2)],1),n("vs-prompt",{attrs:{"vs-title":"Новая группа","vs-accept-text":"Добавить","vs-cancel-text":"Отменить","vs-active":t.dialogAddSection},on:{"vs-cancel":t.cancelAddSection,"vs-accept":t.saveSection,"vs-close":t.cancelAddSection,"update:vsActive":function(e){t.dialogAddSection=e},"update:vs-active":function(e){t.dialogAddSection=e}}},[n("div",{staticClass:"con-exemple-prompt"},[n("span",[t._v("Введите наименование группы")]),n("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"Группа 1","vs-placeholder":"Группа 1"},model:{value:t.newSectionTitle,callback:function(e){t.newSectionTitle=e},expression:"newSectionTitle"}})],1)]),n("vs-prompt",{attrs:{"vs-title":"Редакитровать группу","vs-accept-text":"Сохранить","vs-cancel-text":"Отменить","vs-active":t.dialogUpdateSection},on:{"vs-cancel":t.cancelAddSection,"vs-accept":t.saveUpdateSection,"vs-close":t.cancelAddSection,"update:vsActive":function(e){t.dialogUpdateSection=e},"update:vs-active":function(e){t.dialogUpdateSection=e}}},[n("div",{staticClass:"con-exemple-prompt"},[n("span",[t._v("Измените наименование группы")]),n("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"Группа 1","vs-placeholder":"Группа 1"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveUpdateSection(e)}},model:{value:t.newSectionTitle,callback:function(e){t.newSectionTitle=e},expression:"newSectionTitle"}})],1)]),n("vue-context",{ref:"menu",scopedSlots:t._u([{key:"default",fn:function(e){return[n("ul",{staticClass:"bordered-items p-0"},[n("li",{on:{click:function(n){return t.optionClicked(n.target.innerText,e.data)}}},[t._v("Редактировать")]),n("li",{on:{click:function(n){return t.optionClicked(n.target.innerText,e.data)}}},[t._v("Удалить")])])]}}])})],1)},i=[],o=(n("96cf"),n("cb0c")),s=n("9175"),a={components:{VueContext:s["VueContext"]},data:function(){return{dialogAddSection:!1,dialogUpdateSection:!1,currentEditSection:"",newSectionTitle:"",lastId:null}},methods:{optionClicked:function(t,e){"Редактировать"===t?this.editSection(e):(this.lastId=e.id,this.$vs.dialog({type:"confirm",color:"danger",title:"Подтвердите удаление",text:"Внимание! При удалении группы все ее модули будут удаленны!",acceptText:"Удалить",cancelText:"Отменить",accept:this.deleteSection}))},selectSection:function(t){this.$router.push("/modules/"+t)},addSection:function(){this.dialogAddSection=!0},saveSection:function(){var t=this;this.$http.post("/sections",{title:this.newSectionTitle}).then(function(e){t.$vs.notify({title:"Успешно!",text:"Группа сохраненна.",color:"success"})}).catch(function(e){t.$vs.notify({title:"Ошибка!",text:e.response.data.err,color:"red"})}),this.newSectionTitle=""},cancelAddSection:function(){this.dialogAddSection=!1,this.newSectionTitle="",this.currentEditSection="",this.dialogUpdateSection=!1},editSection:function(t){this.dialogUpdateSection=!0,this.newSectionTitle=t.title,this.currentEditSection=t.id},saveUpdateSection:function(){var t=this;this.$http.post("/sections/"+this.currentEditSection,{title:this.newSectionTitle}).then(function(e){t.$vs.notify({title:"Успешно!",text:"Группа сохраненна.",color:"success"})}).catch(function(e){t.$vs.notify({title:"Ошибка!",text:e.response.data.err,color:"red"})}).then(function(){t.cancelAddSection()})},deleteSection:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.delete("/sections/"+this.lastId);case 3:this.$store.dispatch("modules/sectionDelete",this.lastId),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}()}},l=a,r=(n("25c6"),n("2877")),d=Object(r["a"])(l,c,i,!1,null,"5bee494a",null);e["default"]=d.exports},5829:function(t,e,n){}}]);
//# sourceMappingURL=chunk-5ec8bf2d.083ab330.js.map